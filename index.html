<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>R3vival â€” Shop</title>

<!-- SellAuth embed (checkout modal) -->
<script src="https://sellauth.com/assets/js/sellauth-embed-2.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto, "Helvetica Neue", Arial; margin:0; background:#ffffff; color:#111; -webkit-font-smoothing:antialiased}
  a{color:inherit}
  header{background:#fff;border-bottom:1px solid #eef0f3;padding:20px 16px;position:sticky;top:0;z-index:60}
  .nav-wrap{display:flex;align-items:center;gap:18px;width:100%;max-width:1100px;margin:0 auto;justify-content:space-between}
  .nav-left,.nav-right{display:flex;gap:12px;align-items:center;flex:1;justify-content:center}
  .logo-block{flex:0 0 auto;display:flex;align-items:center;justify-content:center;margin:0 12px}
  .logo { height:72px; width:auto; border-radius:8px; transition:transform .35s; }
  nav a{font-weight:700;padding:8px 12px;border-radius:8px;text-decoration:none;color:#222;transition:all .15s;cursor:pointer}
  nav a.active{background:#f3f8ff;color:#0366d6;box-shadow:0 6px 14px rgba(3,102,214,0.06)}
  nav a:hover{transform:translateY(-2px);color:#0366d6}
  main{max-width:1200px;margin:28px auto;padding:0 16px;display:flex;flex-direction:column;gap:20px}
  .shop-head{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .shop-head h1{font-size:20px;margin:0;color:#111}
  #productsGrid{display:flex;flex-wrap:wrap;gap:20px;justify-content:flex-start}
  .product-card{width:260px;background:#fff;border-radius:12px;padding:14px;box-shadow:0 8px 20px rgba(12,18,30,0.04);display:flex;flex-direction:column;align-items:center;transition:transform .16s,box-shadow .16s;position:relative}
  .product-card:hover{transform:translateY(-6px);box-shadow:0 16px 36px rgba(12,18,30,0.07)}
  .product-img{width:100%;height:240px;border-radius:10px;object-fit:cover;margin-bottom:12px;background:#f7f9fb}
  .product-title{font-weight:700;text-align:center;font-size:15px;margin:6px 0;color:#111}
  .product-desc{font-size:13px;color:#5b6270;text-align:center;margin-top:6px;min-height:34px}
  .price{color:#0366d6;font-weight:800;margin-top:8px;font-size:1.05rem}
  .product-actions{display:flex;gap:10px;margin-top:12px;width:100%}
  .size-select{flex:1;padding:9px;border-radius:10px;border:1px solid #eef2f6;background:#fff}
  .add-btn{flex:1;padding:10px;border-radius:10px;border:none;background:#0366d6;color:#fff;font-weight:700;cursor:pointer}
  .add-btn:hover{background:#024ea8;transform:translateY(-1px)}
  .badge-pre{position:absolute;right:12px;top:12px;background:#ff9f1c;color:white;padding:6px 8px;border-radius:8px;font-weight:700;font-size:12px}
  .cart-button{position:fixed;right:22px;bottom:22px;width:62px;height:62px;border-radius:50%;background:linear-gradient(180deg,#0366d6,#024ea8);color:#fff;display:flex;align-items:center;justify-content:center;box-shadow:0 18px 40px rgba(3,102,214,0.18);cursor:pointer;z-index:999;font-size:20px}
  .cart-count{position:fixed;right:16px;bottom:88px;background:#ff3b30;color:#fff;font-weight:800;padding:6px 9px;border-radius:999px;z-index:999;font-size:13px;box-shadow:0 8px 20px rgba(0,0,0,0.12);display:none}
  .cart-drawer{position:fixed;right:0;top:0;height:100vh;width:420px;background:#fff;box-shadow:-20px 0 60px rgba(10,20,40,0.12);transform:translateX(110%);transition:transform .28s ease;z-index:1000;display:flex;flex-direction:column;padding:18px}
  .cart-drawer.open{transform:translateX(0)}
  .cart-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  .cart-items{flex:1;overflow:auto;padding-right:6px;margin-top:6px}
  .cart-item{display:flex;gap:12px;align-items:center;padding:10px 0;border-bottom:1px solid #f0f4f8}
  .cart-item img{width:72px;height:72px;border-radius:10px;object-fit:cover}
  .cart-item-info{flex:1}
  .cart-item-title{font-weight:700}
  .cart-item-price{color:#0366d6;margin-top:6px;font-weight:700}
  .cart-controls{display:flex;align-items:center;gap:10px;margin-top:8px}
  .qty-btn{padding:6px 10px;border-radius:8px;border:none;background:#eef6ff;color:#0366d6;cursor:pointer}
  .remove-btn{background:transparent;border:none;color:#ff3b30;cursor:pointer}
  .cart-footer{padding-top:12px;border-top:1px solid #f0f4f8}
  .total-row{display:flex;justify-content:space-between;font-weight:800;margin-bottom:12px;font-size:1.05rem}
  .checkout-btn{width:100%;padding:12px;border-radius:10px;border:none;background:#0366d6;color:#fff;font-weight:800;cursor:pointer}
  .checkout-btn:disabled{opacity:.6;cursor:not-allowed}
  .info-row{display:flex;gap:18px;margin-top:20px;flex-wrap:wrap}
  .info-card{flex:1;min-width:260px;background:#fff;border-radius:12px;padding:18px;box-shadow:0 12px 30px rgba(8,12,20,0.04)}
  .fade-in-up{animation:fadeUp .45s ease both}
  @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
  @media(max-width:920px){ .cart-drawer{width:100%} #productsGrid{justify-content:center} .nav-left,.nav-right{display:none} .logo-block{margin:0} }
</style>
</head>
<body>

<header>
  <div class="nav-wrap">
    <div class="nav-left">
      <nav><a onclick="showPage('products')" id="nav-products">Products</a><a onclick="showPage('about')" id="nav-about">About</a></nav>
    </div>

    <div class="logo-block">
      <img class="logo" src="https://i.postimg.cc/nr1DTD7V/r3vival.jpg" alt="R3vival">
    </div>

    <div class="nav-right">
      <nav><a onclick="showPage('contact')" id="nav-contact">Contact</a></nav>
    </div>
  </div>
</header>

<main>
  <div class="shop-head">
    <h1>R3vival â€” Faith. Style. Revival.</h1>
    <div style="color:#666;font-size:14px">Free shipping over $75</div>
  </div>

  <section id="productsSection" class="fade-in-up">
    <div id="productsGrid" aria-live="polite"></div>
  </section>

  <section id="aboutSection" style="display:none">
    <div class="info-card fade-in-up" style="max-width:920px;margin:0 auto">
      <h2>About Project R3vival</h2>
      <p>Project R3vival is a religious clothing brand combining both faith and style. Our mission is to provide high-quality, stylish clothing that reflects the values and beliefs of the wearer. We believe that fashion can be a powerful form of self-expression and a way to share one's faith with the world. At Project R3vival, we are dedicated to offering a wide range of apparel that allows individuals to embrace their spirituality while staying on-trend and fashionable.</p>
    </div>
  </section>

  <section id="contactSection" style="display:none">
    <div class="info-row">
      <div class="info-card">
        <h3>About Us</h3>
        <p>Shop Now</p>
        <p>Long Island,</p>
        <p>New York, NY</p>
      </div>
      <div class="info-card">
        <h3>Working Hours</h3>
        <p>Mon - Fri: 1pm - 9pm</p>
        <p>Saturday: All Hours</p>
        <p>Sunday: All Hours</p>
      </div>
      <div class="info-card">
        <h3>Customer Support</h3>
        <p>Tel: 1-800-123-4567</p>
        <p>Email: <a href="mailto:R3vivalapparel@gmail.com">R3vivalapparel@gmail.com</a></p>
      </div>
    </div>
  </section>
</main>

<div class="cart-button" id="cartButton" title="Open cart">ðŸ›’</div>
<div class="cart-count" id="cartCount">0</div>

<div class="cart-drawer" id="cartDrawer" aria-hidden="true">
  <div class="cart-header">
    <h3>Your Cart</h3>
    <button onclick="closeCart()" aria-label="Close">âœ•</button>
  </div>

  <div class="cart-items" id="cartItems"></div>

  <div class="cart-footer">
    <div class="total-row"><span>Total</span><span id="cartTotal">$0.00</span></div>
    <button class="checkout-btn" id="checkoutBtn" onclick="checkout()" disabled>Checkout</button>
  </div>
</div>

<script>
/* -------------- PRODUCTS (with your variant IDs) -------------- */
/* Replace image URLs with your real hosted images when available */
 const PRODUCTS = [
  { id:'p1', name: 'â€œBlossom Treeâ€ Heavyweight T-Shirt', productId:460427, price:30.00, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/b2438af1-b6c0-4a64-d236-ca0cec099800/public', sizes:{S:675063,M:805376,L:805377,XL:805378,'2XL':805382}, preorder:false },
  { id:'p2', name: 'â€œThe Searchâ€ Hoodie 460 GSM', productId:522462, price:49.99, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/7e5751eb-432a-4391-6fe1-112588414500/public', sizes:{S:793286,M:805401,L:805402,XL:805403,'2XL':805404}, preorder:false },
  { id:'p3', name: 'â€œJesus Christâ€ Heavyweight Tee', productId:525499, price:30.00, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/476f5e6b-9499-4b6c-20f5-60e02cfaf500/public', sizes:{S:798889,M:805410,L:805411,XL:805412,'2XL':805413}, preorder:false },
  { id:'p4', name: 'â€œTiger Of Angerâ€ Hoodie', productId:525500, price:54.99, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/4c90751f-139d-403b-05ee-d708e4517100/public', sizes:{S:798905,M:805425,L:805426,XL:805427,'2XL':805428}, preorder:false },
  { id:'p5', name: 'R3vival in christ Heavyweight T-Shirt', productId:525502, price:30.00, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/49e792cd-8371-4ae8-3178-cd128338e100/public', sizes:{S:798910,M:805438,L:805439,XL:805440,'2XL':805488}, preorder:false },
  { id:'p6', name: 'â€œDavidâ€™s Conquestâ€ hoodie 400 GSM', productId:525617, price:50.00, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/c23c6745-d7c6-456f-b4f5-f4a0bb485a00/public', sizes:{S:799111,M:805449,L:805450,XL:805451,'2XL':805452}, preorder:false },
  { id:'p7', name: 'â€œTree Of Booksâ€ V2 Baggy Tee', productId:525620, price:30.00, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/c90a2244-5b97-4157-8c19-f6affad04a00/public', sizes:{S:799125,M:805453,L:805454,XL:805455,'2XL':805456}, preorder:false },
  { id:'p8', name: 'Split Leopard â€œr3â€ Denim Jeans', productId:525627, price:99.99, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/eecdeb5f-b587-4a6b-9752-124b5f69b700/public', sizes:{S:799134,M:805458,L:805459,XL:805460,'2XL':805461}, preorder:false },
  { id:'p9', name: 'Touched By The Holy Spirit Zip-Up', productId:525644, price:60.00, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/15e299e3-fabf-496b-5f41-0d435e4a2f00/public', sizes:{S:799160,M:805464,L:805465,XL:805466,'2XL':805467}, preorder:false },
  { id:'p10', name: '"R3vival" Distressed Wide Jeans', productId:525646, price:74.99, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/b5d28019-6202-4179-e3af-e06a5bd99900/public', sizes:{S:799162,M:805469,L:805470,XL:805471,'2XL':805472}, preorder:false },
  { id:'p11', name: 'Stuck in Sin Boxy Hoodie', productId:525652, price:49.99, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/3221c19f-8d54-40a5-3b9c-8328e7608900/public', sizes:{S:799172,M:805475,L:805476,XL:805477,'2XL':805478}, preorder:false },
  { id:'p12', name: 'â€œconclusionâ€ Camo-Denim Jorts', productId:525656, price:64.99, image:'https://imagedelivery.net/HL_Fwm__tlvUGLZF2p74xw/3531e28b-001c-49ac-ecab-5c8868c49700/public', sizes:{S:799178,M:805480,L:805481,XL:805482,'2XL':805483}, preorder:false }
];


const SHOP_ID = 179365;

/* -------------- STATE -------------- */
let cart = []; // { id, productId, variantId, name, price, img, qty }

/* -------------- HELPERS -------------- */
function formatPrice(n){ return '$' + Number(n || 0).toFixed(2); }
function el(tag, attrs={}, children=[]){ const e=document.createElement(tag); for(const k in attrs) if(k==='html') e.innerHTML=attrs[k]; else e.setAttribute(k, attrs[k]); (Array.isArray(children)?children:[children]).forEach(c=>{ if(typeof c==='string') e.appendChild(document.createTextNode(c)); else if(c) e.appendChild(c)}); return e; }

/* -------------- RENDER PRODUCTS -------------- */
function renderProducts(){
  const grid = document.getElementById('productsGrid');
  grid.innerHTML = '';
  PRODUCTS.forEach(p=>{
    const card = el('div',{class:'product-card fade-in-up', style:'position:relative;'});
    if (p.preorder){
      card.appendChild(el('div',{class:'badge-pre'}, ['PREORDER']));
    }
    const img = el('img',{class:'product-img', src:p.image, alt:p.name});
    const title = el('div',{class:'product-title'}, [p.name]);
    const desc = el('div',{class:'product-desc'}, [p.description || '']);
    const price = el('div',{class:'price'}, [formatPrice(p.price)]);
    const actions = el('div',{class:'product-actions'});
    const select = el('select',{class:'size-select', 'aria-label':'Size selector'});
    // fill select with sizes using the keys order S M L XL 2XL
    const sizeOrder = ['S','M','L','XL','2XL'];
    sizeOrder.forEach(sz=>{
      const opt = el('option',{value:p.sizes[sz]}, [sz]);
      select.appendChild(opt);
    });
    const addBtn = el('button',{class:'add-btn'}, [p.preorder ? 'Preorder' : 'Add to cart']);
    addBtn.onclick = ()=>{
      const chosenVariant = select.value;
      addToCart({
        id: p.id,
        productId: p.productId,
        variantId: chosenVariant,
        name: p.name + ' (' + select.options[select.selectedIndex].text + ')',
        price: p.price,
        img: p.image
      });
    };
    actions.appendChild(select);
    actions.appendChild(addBtn);

    card.appendChild(img);
    card.appendChild(title);
    card.appendChild(desc);
    card.appendChild(price);
    card.appendChild(actions);
    grid.appendChild(card);
  });
}

/* -------------- CART -------------- */
function addToCart(item){
  // item: { id, productId, variantId, name, price, img }
  // if same variant exists, increment qty
  const found = cart.find(i => String(i.variantId) === String(item.variantId));
  if (found) found.qty++;
  else cart.push({ id: item.id || Math.random().toString(36).slice(2,9), productId: item.productId, variantId: String(item.variantId), name: item.name, price: Number(item.price||0), img: item.img||'', qty:1 });
  renderCart();
  openCart();
}

function renderCart(){
  const container = document.getElementById('cartItems');
  container.innerHTML = '';
  let total = 0;
  cart.forEach((it, idx)=>{
    const row = el('div',{class:'cart-item'});
    const img = el('img',{src: it.img || 'https://via.placeholder.com/400x300?text=No+Image', alt: it.name});
    const info = el('div',{class:'cart-item-info'});
    info.innerHTML = `<div class="cart-item-title">${it.name}</div><div class="cart-item-price">${formatPrice(it.price)}</div>`;
    const controls = el('div',{class:'cart-controls'});
    const minus = el('button',{class:'qty-btn'}, ['âˆ’']); minus.onclick = ()=>{ if(it.qty>1) it.qty--; else removeFromCart(idx); renderCart(); };
    const qty = el('div',{}, [String(it.qty)]);
    const plus = el('button',{class:'qty-btn'}, ['+']); plus.onclick = ()=>{ it.qty++; renderCart(); };
    const remove = el('button',{class:'remove-btn'}, ['Remove']); remove.onclick = ()=>{ removeFromCart(idx); };
    controls.appendChild(minus); controls.appendChild(qty); controls.appendChild(plus); controls.appendChild(remove);

    row.appendChild(img); row.appendChild(info); row.appendChild(controls);
    container.appendChild(row);
    total += (it.price || 0) * it.qty;
  });
  document.getElementById('cartTotal').textContent = formatPrice(total);
  document.getElementById('checkoutBtn').disabled = cart.length === 0;
  const cc = document.getElementById('cartCount'); cc.textContent = cart.reduce((s,i)=>s+i.qty,0); cc.style.display = cart.length? 'block':'none';
}

function removeFromCart(index){ cart.splice(index,1); renderCart(); }

const drawer = document.getElementById('cartDrawer');
function openCart(){ drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false'); renderCart(); }
function closeCart(){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); }

/* -------------- CHECKOUT -------------- */
function checkout(){
  if (cart.length === 0) return alert('Cart is empty');
  // verify all items have numeric productId and variantId
  const invalid = cart.some(i => !i.productId || !i.variantId);
  if (invalid){
    // fallback: show summary and ask for contact
    let s = 'Some items are missing direct checkout IDs. Order summary:\\n\\n';
    cart.forEach(i=> s += `${i.name} x${i.qty} â€” ${formatPrice(i.price)}\\n`);
    s += `\\nTotal: ${formatPrice(cart.reduce((t,i)=>t + i.price*i.qty,0))}\\n\\nPlease contact Revivalapparel@gmail.com to complete this order.`;
    return alert(s);
  }

  const sellCart = cart.map(i=>({
    productId: Number(i.productId),
    variantId: Number(i.variantId),
    quantity: i.qty
  }));

  if (!window.sellAuthEmbed) {
    alert('SellAuth embed not loaded. Checkout cannot proceed.');
    return;
  }

  try {
    window.sellAuthEmbed.checkout(this, { cart: sellCart, shopId: SHOP_ID, modal: true });
  } catch (e) {
    console.error(e);
    alert('Checkout failed. See console for details.');
  }
}

/* -------------- NAV -------------- */
function showPage(page){
  document.getElementById('productsSection').style.display = 'none';
  document.getElementById('aboutSection').style.display = 'none';
  document.getElementById('contactSection').style.display = 'none';
  document.getElementById('nav-products').classList.remove('active');
  document.getElementById('nav-about').classList.remove('active');
  document.getElementById('nav-contact').classList.remove('active');

  if (page === 'products'){ document.getElementById('productsSection').style.display = ''; document.getElementById('nav-products').classList.add('active'); }
  else if (page === 'about'){ document.getElementById('aboutSection').style.display = ''; document.getElementById('nav-about').classList.add('active'); }
  else if (page === 'contact'){ document.getElementById('contactSection').style.display = ''; document.getElementById('nav-contact').classList.add('active'); }
}

/* -------------- INIT -------------- */
document.getElementById('cartButton').addEventListener('click', openCart);
window.addEventListener('DOMContentLoaded', ()=>{
  renderProducts();
  renderCart();
  showPage('products');
});
</script>
</body>
</html>
